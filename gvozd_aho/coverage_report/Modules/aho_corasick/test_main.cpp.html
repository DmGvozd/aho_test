<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>test_main.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include &lt;gtest/gtest.h&gt;
#include "aho_corasick.hpp"

class AhoCorasickTest : public testing::Test {
protected:
<span style = "background-color:#dfd">    void SetUp() override {}
    void TearDown() override {}</span>
};


<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, BasicFunctionality) {
    AhoCorasick ac;
    ac.add_pattern("he");
    ac.add_pattern("she");
    ac.add_pattern("his");
    ac.add_pattern("hers");
    ac.build();</span>

<span style = "background-color:#dfd">    auto results = ac.search("shers");
    ASSERT_EQ(results.size(), 3);</span>

<span style = "background-color:#dfd">    bool found_he = false, found_she = false, found_hers = false;
    for (const auto&amp; match : results) {
        if (match.second == "he") found_he = true;
        if (match.second == "she") found_she = true;
        if (match.second == "hers") found_hers = true;
    }</span>

<span style = "background-color:#dfd">    ASSERT_TRUE(found_he);
    ASSERT_TRUE(found_she);
    ASSERT_TRUE(found_hers);
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, EmptyPattern) {
    AhoCorasick ac;
    ac.build();
    auto results = ac.search("test");
    ASSERT_TRUE(results.empty());
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, EmptyText) {
    AhoCorasick ac;
    ac.add_pattern("test");
    ac.build();
    auto results = ac.search("");
    ASSERT_TRUE(results.empty());
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, SingleCharPattern) {
    AhoCorasick ac;
    ac.add_pattern("a");
    ac.build();
    auto results = ac.search("a");
    ASSERT_EQ(results.size(), 1);
    ASSERT_EQ(results[0].first, 0);
    ASSERT_EQ(results[0].second, "a");
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, OverlappingPatterns) {
    AhoCorasick ac;
    ac.add_pattern("abc");
    ac.add_pattern("bc");
    ac.add_pattern("c");
    ac.build();</span>

<span style = "background-color:#dfd">    auto results = ac.search("abc");
    ASSERT_EQ(results.size(), 3);
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, SuffixLinkTraversal) {
    AhoCorasick ac;
    ac.add_pattern("abc");
    ac.add_pattern("bc");
    ac.add_pattern("c");
    ac.build();</span>

<span style = "background-color:#dfd">    auto results = ac.search("dabc");
    ASSERT_EQ(results.size(), 3);
}</span>

<span style = "background-color:#dfd">TEST_F(AhoCorasickTest, OutputLinkTraversal) {
    AhoCorasick ac;
    ac.add_pattern("abc");
    ac.add_pattern("bc");
    ac.add_pattern("c");
    ac.build();</span>

<span style = "background-color:#dfd">    auto results = ac.search("xabcd");
    ASSERT_EQ(results.size(), 3);
}</span>

<span style = "background-color:#dfd">int main(int argc, char** argv) {
    testing::InitGoogleTest(&amp;argc, argv);
    return RUN_ALL_TESTS();
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>